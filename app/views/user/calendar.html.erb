
<!-- https://jqueryui.com/datepicker/ -->

<!-- http://api.jqueryui.com/datepicker/#option-showOn -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>datepicker demo</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
</head>
<body>

<div id = "successful_email"></div>

<div id="datepicker"></div>
 
<script>

// $( "#datepicker" ).datepicker();

// $( "#datepicker").


var date1 = "";
var date2 = "";
var date3 = "";

$(function() {
    $('#datepicker').datepicker( {
        onSelect: function(date) {

        	if(date1 == ""){
        		date1 = date;
        		console.log("date1 is: " + date1);
        	}
        	else if(date2 == ""){
        		date2 = date;
        		console.log("date2 is: " + date2);
        	}
        	else{
        		date3 = date;
        		console.log("date3 is: " + date3);
        	}

            //alert(date);
        },
        selectWeek: true,
        inline: true,
        startDate: '01/01/2000',
        firstDay: 1
    });
});
</script>

<button type="button" id = "submit_button" onclick = "submit_dates();">submit</button>


<script>

//http://stackoverflow.com/questions/15040964/warning-cant-verify-csrf-token-authenticity-in-case-of-api-development

function submit_dates(){

	//console.log("date1 live? " + date1);

	//if it works, then show "successfully emailed" message
	var params = {date1: date1, date2: date2, date3: date3 }

  $.ajax({
      type: "POST",
      url: "/user/audit_request/?format=json",
      data: params,
      dataType: "json",
      traditional: true,
      async:false,
      success: function(data){
        console.log("successfully got into success");
        console.log(data.post);

        $("#successful_email").text("your request for a visit has been sent");

      }

    });

}

</script>

 
</body>
</html>
 
